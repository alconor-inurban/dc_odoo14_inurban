<?xml version="1.0" encoding="utf-8"?>
<odoo>

        <!-- Top menu item -->
        <menuitem name="Muestra de Caña"
            id="menu_sample_root"
            groups="group_sample_manager,group_sample_user"
            web_icon="sample,static/description/icon.png"
            sequence="25"/>


            <!--Menú Configuración -->    
            <menuitem id="menu_sample_config"
                name="Configuration"
                parent="menu_sample_root"
                sequence="100"
                groups="group_sample_manager"/>

                        <menuitem id="menu_product_pricelist_action2_sample"
                            action="product.product_supplierinfo_type_action"
                            parent="menu_sample_config"
                            sequence="1"/>

                        <menuitem id="menu_product_in_config_sample"
                            name="Products"
                            parent="menu_sample_config"
                            sequence="30"/>

        <record model="ir.ui.menu" id="menu_product_in_config_sample">
            <field name="groups_id" eval="False"/>
        </record>
   
        <!--        
        <menuitem id="menu_product_attribute_action"
            action="product.attribute_action" name="Product Attributes"
            parent="sample.menu_product_in_config_sample"  groups="product.group_product_variant" sequence="1"/>
        
        <menuitem
            action="product.product_category_action_form" id="menu_product_category_config_sample"
            parent="sample.menu_product_in_config_sample" sequence="3" />

         <menuitem
            id="menu_unit_of_measure_in_config_sample" name="Units of Measures"
            parent="menu_sample_config" sequence="40" groups="uom.group_uom" />

        <menuitem
              action="uom.product_uom_form_action" id="menu_sample_uom_form_action"
              parent="sample.menu_unit_of_measure_in_config_sample" sequence="5" groups="uom.group_uom"/>

        <menuitem
             action="uom.product_uom_categ_form_action" id="menu_sample_uom_categ_form_action"
             parent="sample.menu_unit_of_measure_in_config_sample" sequence="10" groups="uom.group_uom"/>
    -->
    <!-- Products Control Menu -->
    <!--
    <menuitem id="menu_sample_products" name="Products" parent="sample.menu_sample_root" sequence="5"/>
    -->
    <!--
    <record id="product_normal_action_puchased" model="ir.actions.act_window">
        <field name="name">Products</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">product.template</field>
        <field name="view_mode">kanban,tree,form,activity</field>
        <field name="context">{"search_default_filter_to_sample":1, "sample_product_template": 1}</field>
        <field name="search_view_id" ref="product.product_template_search_view"/>
        <field name="view_id" eval="False"/> 
        <field name="help" type="html">
          <p class="o_view_nocontent_smiling_face">
            No product found. Let's create one!
          </p><p>
            You must define a product for everything you sell or sample,
            whether it's a storable product, a consumable or a service.
          </p>
        </field>
    </record>
    -->

      <!-- Product menu-->
    <!--
      <menuitem name="Products" id="menu_procurement_partner_contact_form" action="product_normal_action_puchased"
          parent="menu_sample_products" sequence="20"/>

        <record id="product_product_action" model="ir.actions.act_window">
            <field name="name">Product Variants</field>
            <field name="res_model">product.product</field>
            <field name="view_mode">tree,kanban,form,activity</field>
            <field name="search_view_id" ref="product.product_search_form_view"/>
            <field name="context">{"search_default_filter_to_sample": 1}</field>
            <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                Create a new product variant
              </p><p>
                You must define a product for everything you sell or sample,
                whether it's a storable product, a consumable or a service.
              </p>
            </field>
        </record>

        <menuitem id="product_product_menu" name="Product Variants" action="product_product_action"
            parent="menu_sample_products" sequence="21" groups="product.group_product_variant"/>
       --> 

        <record model="ir.ui.view" id="sample_order_calendar">
            <field name="name">sample.order.calendar</field>
            <field name="model">sample.order</field>
            <field name="priority" eval="2"/>
            <field name="arch" type="xml">
                <calendar string="Calendar View" date_start="date_calendar_start" color="partner_id" hide_time="true" event_limit="5" create="false">
                    <field name="currency_id" invisible="1"/>
                    <field name="partner_ref"/>
                    <field name="amount_total" widget="monetary"/>
                    <field name="qty_total"/>
                    <field name="porc_impureza" widget="percentpie"/>
                    <field name="partner_id" filters="1"/>
                </calendar>
            </field>
        </record>
        <record model="ir.ui.view" id="sample_order_pivot">
            <field name="name">sample.order.pivot</field>
            <field name="model">sample.order</field>
            <field name="arch" type="xml">
                <pivot string="sample Order" display_quantity="True" sample="1">
                    <field name="partner_id" type="row"/>
                    <field name="amount_total" type="measure"/>
                    <field name="qty_total" type="measure"/>
                    <field name="porc_impureza" widget="percentpie"/>
                </pivot>
            </field>
        </record>
        <record model="ir.ui.view" id="sample_order_graph">
            <field name="name">sample.order.graph</field>
            <field name="model">sample.order</field>
            <field name="arch" type="xml">
                <graph string="sample Order" sample="1">
                    <field name="partner_id"/>
                    <field name="amount_total" type="measure"/>
                    <field name="qty_total" type="measure"/>
                    <field name="porc_impureza" widget="percentpie"/>
                </graph>
            </field>
        </record>
        <!--VISTA FORM: SAMPLE ORDER-->
        <record id="sample_order_form" model="ir.ui.view">
            <field name="name">sample.order.form</field>
            <field name="model">sample.order</field>
            <field name="arch" type="xml">
                <form string="Sample Order" class="o_purchase_order">
                <header>
                    <button name="action_rfq_send" states="draft" string="Send by Email" type="object" context="{'send_rfq':True}" class="oe_highlight"/>
                    <button name="print_quotation" string="Print RFQ" type="object" states="draft" class="oe_highlight" groups="base.group_user"/>
                    <button name="button_confirm" type="object" states="sent" string="Confirmar Muestra" class="oe_highlight" id="bid_confirm"/>
                    <button name="button_approve" type="object" states='to approve' string="Approve Order" class="oe_highlight"/>
                    <!--
                    <button name="button_approve" type="object" states='to approve' string="Approve Order" class="oe_highlight" groups="sample.group_sample_manager"/>
                    <button name="action_create_invoice" string="Create Bill" type="object" class="oe_highlight" context="{'create_bill':True}" attrs="{'invisible': ['|', ('state', 'not in', ('sample', 'done')), ('invoice_status', 'in', ('no', 'invoiced'))]}"/>
                    -->
                    <button name="action_rfq_send" states="sent" string="Re-Send by Email" type="object" context="{'send_rfq':True}"/>
                    <button name="print_quotation" string="Print RFQ" type="object" states="sent" groups="base.group_user"/>
                    <button name="button_confirm" type="object" states="draft" string="Confirm Order" id="draft_confirm"/>
                    <button name="action_rfq_send" states="sample" string="Send PO by Email" type="object" context="{'send_rfq':False}"/>
                    <!--
                    <button name="confirm_reminder_mail" string="Confirm Receipt Date" type="object" attrs="{'invisible': ['|','|', ('state', 'not in', ('sample', 'done')), ('mail_reminder_confirmed', '=', True), ('date_planned', '=', False)]}" groups="base.group_no_one"/>
                    -->
                    <!--
                    <button name="action_create_invoice" string="Create Bill" type="object" context="{'create_bill':True}" attrs="{'invisible': ['|', '|', ('state', 'not in', ('sample', 'done')), ('invoice_status', 'not in', ('no', 'invoiced')), ('order_line', '=', [])]}"/>
                    -->
                    <button name="button_draft" states="cancel" string="Set to Draft" type="object" />
                    <button name="button_cancel" states="draft,to approve,sent,sample" string="Cancel" type="object" />
                    <button name="button_done" type="object" string="Lock" states="sample"/>
                    <button name="button_unlock" type="object" string="Unlock" states="done" groups="sample.group_sample_manager"/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,sent,sample" readonly="1"/>
                </header>
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button type="object"  name="action_view_invoice"
                            class="oe_stat_button"
                            icon="fa-pencil-square-o" attrs="{'invisible':['|', ('invoice_count', '=', 0), ('state', 'in', ('draft','sent','to approve'))]}">
                            <field name="invoice_count" widget="statinfo" string="Vendor Bills"/>
                            <field name='invoice_ids' invisible="0"/>
                        </button>
                    </div>
                    <div class="oe_title">
                        <span class="o_form_label" attrs="{'invisible': [('state','not in',('draft','sent'))]}">Solicitud de Muestra: </span>
                        <span class="o_form_label" attrs="{'invisible': [('state','in',('draft','sent'))]}">Sample Order </span>
                        <h1>
                            <field name="priority" widget="priority" class="mr-3"/>
                            <field name="name" readonly="1"/>
                            <label for ="company_id" string=" - "/>
                            <field name="company_id" readonly="1"/>
                        </h1>
                    </div>
                    <group colspan="6">
                        <group>
                            <field name="tickete"/>
                            <field name="projects_id"/>
                            <field name="partner_id" widget="res_partner_many2one" context="{'res_partner_search_mode': 'supplier', 'show_vat': True}"
                                placeholder="Name, TIN, Email, or Reference"
                            />
                            <field name="currency_id" groups="base.group_multi_currency" force_save="1"/>
                            <field name="diazafra"/>
                            <field name="id" invisible="1"/>
                            <field name="frente"/>
                            <field name="tipocorte" placeholder="Tipor Corte, CEPA, SOCA"/>
                            <field name="variedad"/>
                            <label for="tipo_cane" string="Tipo Caña"/>
                            <field name="tipo_cane" nolabel="1"/>
                            <field name="longitud_avg1"/>
                            <field name="porc_diatraea" />
                        </group>
                        <group>
                            <field name="guia"/>
                            <field name="caja_muestra"/>
                            <field name="date_order"/>
                            <!--
                            <label for="date_approve" attrs="{'invisible': [('state','!=','sample')]}"/>
                            <div name="date_approve" attrs="{'invisible': [('state','!=','sample')]}" class="o_row">
                            -->
                            <label for="date_approve" />
                            <div name="date_approve" >
                                <field name="date_approve"/>
                                <field name="mail_reception_confirmed" invisible="1"/>
                                <span class="text-muted" attrs="{'invisible': [('mail_reception_confirmed','=', False)]}">(confirmed by vendor)</span>
                            </div>
                            <!--
                            <field name="origin" attrs="{'invisible': [('origin','=',False)]}"/>
                            <field name="hdc" attrs="{'invisible': [('state','=','sample')]}"/>
                            <label for="hdc" attrs="{'invisible': [('state','!=','sample')]}"/>
                            <field name="hdq" attrs="{'invisible': [('state','=','sample')]}"/>
                            <label for="hdq" attrs="{'invisible': [('state','!=','sample')]}"/>
                            <field name="origin" />
                            -->
                            
                            <field name="hdc" />
                            <field name="hdq" />
                            <field name="porc_impureza" widget="percentpie"/>
                            <field name="peso_muestra_total"/>
                            <field name="duracion" string="Duración (mins.)" />
                        </group>
                    </group>
                    <notebook>
                        <page string="Products" name="products">
                            <field name="order_line"
                                widget="section_and_note_one2many"
                                mode="tree"
                                context="{'default_state': 'draft'}"
                                attrs="{'readonly': [('state', 'in', ('done', 'cancel'))]}">
                                <!--Lista-->
                                <tree string="sample Order Lines" editable="bottom">
                                    <control>
                                        <create name="add_product_control" string="Add a product"/>
                                        <create name="add_section_control" string="Add a section" context="{'default_display_type': 'line_section'}"/>
                                        <create name="add_note_control" string="Add a note" context="{'default_display_type': 'line_note'}"/>
                                    </control>
                                    <field name="display_type" invisible="1"/>
                                    <field name="currency_id" invisible="1"/>
                                    <field name="state" invisible="1" readonly="1"/>
                                    <field name="product_type" invisible="1"/>
                                    <field name="product_uom_category_id" invisible="1"/>
                                    <field name="invoice_lines" invisible="1"/>
                                    <field name="sequence" widget="handle"/>
                                    <field name="product_id" optional="show"/>
                                    <field name="name" widget="section_and_note_text" optional="show"/>
                                    <field name="product_qty" optional="show"/>
                                    <field name="qty_received_manual" invisible="1"/>
                                    <field name="qty_received_method" invisible="1"/>
                                    <field name="porc_item" string="Porc.%" attrs="{'column_invisible': [('parent.state', 'not in', ('draft', 'sample', 'done'))], 'readonly': [('qty_received_method', '!=', 'manual')]}" optional="show"/>
                                    <field name="tot_qty" string="Tot.M." attrs="{'column_invisible': [('parent.state', 'not in', ('draft', 'sample', 'done'))], 'readonly': [('qty_received_method', '!=', 'manual')]}" optional="show"/>
                                    <field name="qty_received" string="Received" attrs="{'column_invisible': [('parent.state', 'not in', ('sample', 'done'))], 'readonly': [('qty_received_method', '!=', 'manual')]}" optional="hide"/>
                                    <field name="product_uom" string="UoM" optional="hide"/>
                                    <field name="longitud_avg" optional="hide"/>
                                    
                                </tree>
                            </field>
                            <group class="oe_subtotal_footer oe_right">
                                <div class="oe_subtotal_footer_separator oe_inline">
                                    <label for="qty_total"/>
                                    <label for="amount_total"/>
                                </div>
                                <field name="qty_total" nolabel="1" class="oe_subtotal_footer_separator"/>
                                <field name="amount_total" nolabel="1" class="oe_subtotal_footer_separator" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            </group>
                            <field name="notes" class="oe_inline" placeholder="Define your terms and conditions ..."/>
                            <div class="oe_clear"/>
                        </page>
                        <page string="Other Information" name="sample_delivery_invoice">
                            <group>
                                <group name="other_info">
                                    <field name="user_id" domain="[('share', '=', False)]" widget="many2one_avatar_user"/>
                                    <field name="company_id" groups="base.group_multi_company" options="{'no_create': True}"/>
                                </group>
                                <group name="invoice_info">
                                    <field name="invoice_status" attrs="{'invisible': [('state', 'in', ('draft', 'sent', 'to approve', 'cancel'))]}"/>
                                    <field name="payment_term_id" attrs="{'readonly': ['|', ('invoice_status','=', 'invoiced'), ('state', '=', 'done')]}" options="{'no_create': True}"/>
                                    <field name="fiscal_position_id" options="{'no_create': True}" attrs="{'readonly': ['|', ('invoice_status','=', 'invoiced'), ('state', '=', 'done')]}"/>
                                </group>
                            </group>
                        </page>
                        <page string="Muestreo" name="sample_muestreo">
                            <group>
                                <group name="muestreo1_info">
                                    <field name="empleado_id" string="Encargado/Equipo" />
                                </group>
                                <group name="muestreo2_info">
                                    <field name="equipo_id" string="Equipo Muestreo"/>
                                </group>
                            </group>
                        </page>
                        <page string="Corte" name="sample_corte">
                            <group>
                                <group name="corte1_info">
                                </group>
                                <group name="corte2_info">
                                </group>
                            </group>
                        </page>
                        <page string="Alce" name="sample_alce">
                            <group>
                                <group name="alce1_info">
                                </group>
                                <group name="alce2_info">
                                </group>
                            </group>
                        </page>
                        <page string="Acarreo" name="sample_acarreo">
                            <group>
                                <group name="acarreo1_info">
                                </group>
                                <group name="acarreo2_info">
                                </group>
                            </group>
                        </page>

                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids"/>
                    <field name="activity_ids"/>
                    <field name="message_ids"/>
                </div>
                </form>
            </field>
        </record>

       <record id="view_sample_order_filter" model="ir.ui.view">
            <field name="name">request.quotation.select</field>
            <field name="model">sample.order</field>
            <field name="arch" type="xml">
                <search string="Search sample Order">
                    <field name="name" string="Order"
                        filter_domain="['|', '|', ('name', 'ilike', self), ('partner_ref', 'ilike', self), ('partner_id', 'child_of', self)]"/>
                    <field name="partner_id" operator="child_of"/>
                    <field name="user_id"/>
                    <field name="product_id"/>
                    <filter name="my_samples" string="My samples" domain="[('user_id', '=', uid)]"/>
                    <filter string="Starred" name="starred" domain="[('priority', '=', '1')]"/>
                    <separator/>
                    <filter name="draft" string="RFQs" domain="[('state', 'in', ('draft', 'sent', 'to approve'))]"/>
                    <separator/>
                    <filter name="approved" string="sample Orders" domain="[('state', 'in', ('draft', 'sample', 'done'))]"/>
                    <filter name="to_approve" string="To Approve" domain="[('state', '=', 'to approve')]"/>
                    <separator/>
                    <filter name="order_date" string="Order Date" date="date_order"/>
                    <filter name="draft_rfqs" string="Draft RFQs" domain="[('state', '=', 'draft')]"/>
                    <filter name="waiting_rfqs" string="Waiting RFQs" domain="[('state', '=', 'sent'), ('date_order', '&gt;=', datetime.datetime.now())]"/>
                    <filter name="late_rfqs" string="Late RFQs" domain="[('state', 'in', ['draft', 'sent', 'to approve']),('date_order', '&lt;', datetime.datetime.now())]"/>
                    <separator/>
                    <filter invisible="1" string="Late Activities" name="activities_overdue"
                        domain="[('activity_ids.date_deadline', '&lt;', context_today().strftime('%Y-%m-%d'))]"
                        help="Show all records which has next action date is before today"/>
                    <filter invisible="1" string="Today Activities" name="activities_today"
                        domain="[('activity_ids.date_deadline', '=', context_today().strftime('%Y-%m-%d'))]"/>
                    <filter invisible="1" string="Future Activities" name="activities_upcoming_all"
                        domain="[('activity_ids.date_deadline', '&gt;', context_today().strftime('%Y-%m-%d'))]"/>
                    <separator/>
                    <filter string="Warnings" name="activities_exception"
                        domain="[('activity_exception_decoration', '!=', False)]"/>
                    <group expand="0" string="Group By">
                        <filter string="Vendor" name="vendor" domain="[]" context="{'group_by': 'partner_id'}"/>
                        <filter string="sample Representative" name="representative" domain="[]" context="{'group_by': 'user_id'}"/>
                        <filter string="Order Date" name="order_date" domain="[]" context="{'group_by': 'date_order'}"/>
                    </group>
                </search>
            </field>
        </record>
        <!-- SAMPLE ORDER VIEW SEARCH -->
        <record id="sample_order_view_search" model="ir.ui.view">
            <field name="name">sample.order.select</field>
            <field name="model">sample.order</field>
            <field name="arch" type="xml">
                <search string="Search sample Order">
                    <field name="name" string="Order"
                        filter_domain="['|', '|', ('name', 'ilike', self), ('partner_ref', 'ilike', self), ('partner_id', 'child_of', self)]"/>
                    <field name="partner_id" operator="child_of"/>
                    <field name="up"/>
                    <field name="lote"/>
                    <field name="user_id"/>
                    <field name="product_id"/>
                    <filter name="my_Orders" string="My Orders" domain="[('user_id', '=', uid)]"/>
                    <filter string="Starred" name="starred" domain="[('priority', '=', '1')]"/>
                    <separator/>
                    <filter name="unconfirmed" string="Not Acknowledged" domain="[('mail_reception_confirmed', '=', False), ('state', '=', 'sample')]"/>
                    <filter name="not_invoiced" string="Waiting Bills" domain="[('invoice_status', '=', 'to invoice')]" help="sample orders that include lines not invoiced."/>
                    <filter name="invoiced" string="Bills Received" domain="[('invoice_status', '=', 'invoiced')]" help="sample orders that have been invoiced."/>
                    <separator/>
                    <filter name="order_date" string="Order Date" date="date_order"/>
                    <separator/>
                    <filter invisible="1" string="Late Activities" name="activities_overdue"
                        domain="[('activity_ids.date_deadline', '&lt;', context_today().strftime('%Y-%m-%d'))]"
                        help="Show all records which has next action date is before today"/>
                    <filter invisible="1" string="Today Activities" name="activities_today"
                        domain="[('activity_ids.date_deadline', '=', context_today().strftime('%Y-%m-%d'))]"/>
                    <filter invisible="1" string="Future Activities" name="activities_upcoming_all"
                        domain="[('activity_ids.date_deadline', '&gt;', context_today().strftime('%Y-%m-%d'))]"/>
                    <separator/>
                    <filter string="Warnings" name="activities_exception"
                        domain="[('activity_exception_decoration', '!=', False)]"/>
                    <group expand="0" string="Group By">
                        <filter string="Vendor" name="vendor" domain="[]" context="{'group_by': 'partner_id'}"/>
                        <filter string="sample Representative" name="representative" domain="[]" context="{'group_by': 'user_id'}"/>
                        <filter string="Order Date" name="order_date" domain="[]" context="{'group_by': 'date_order'}"/>
                    </group>
                </search>
            </field>
        </record>
        

        <!-- sample Orders Kanban View  -->
        <record model="ir.ui.view" id="view_sample_order_kanban">
            <field name="name">sample.order.kanban</field>
            <field name="model">sample.order</field>
            <field name="arch" type="xml">
                <kanban class="o_kanban_mobile" js_class="purchase_kanban_dashboard" sample="1">
                    <field name="name"/>
                    <field name="partner_id" readonly="1"/>
                    <field name="qty_total"/>
                    <field name="porc_impureza"/>
                    <field name="amount_total"/>
                    <field name="state"/>
                    <field name="date_order"/>
                    <field name="currency_id" readonly="1"/>
                    <field name="activity_state"/>
                    <progressbar field="activity_state" colors='{"planned": "success", "today": "warning", "overdue": "danger"}'/>
                    <templates>
                        <t t-name="kanban-box">
                            <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                                <div class="o_kanban_record_top mb16">
                                    <field name="priority" widget="priority"/>
                                    <div class="o_kanban_record_headings ml-1">
                                        <strong class="o_kanban_record_title"><span><t t-esc="record.partner_id.value"/></span></strong>
                                    </div>
                                    <strong><field name="qty_total" string="Kg"/></strong>
                                    <strong><field name="porc_impureza" widget="percentpie" string="% Impur."/></strong>
                                    <!--<strong><field name="amount_total" widget="monetary"/></strong>-->
                                </div>
                                <div class="o_kanban_record_bottom">
                                    <div class="oe_kanban_bottom_left">
                                        <span><t t-esc="record.name.value"/> <t t-esc="record.date_order.value and record.date_order.value.split(' ')[0] or False"/></span>
                                        <field name="activity_ids" widget="kanban_activity"/>
                                    </div>
                                    <div class="oe_kanban_bottom_right">
                                        <field name="state" widget="label_selection" options="{'classes': {'draft': 'default', 'cancel': 'default', 'done': 'success', 'approved': 'warning'}}"/>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>
        <!--SAMPLE ORDER TREE-->
        <record id="sample_order_tree" model="ir.ui.view">
            <field name="name">sample.order.tree</field>
            <field name="model">sample.order</field>
            <field name="priority" eval="1"/>
            <field name="arch" type="xml">
                <tree string="sample Order" multi_edit="1" decoration-bf="message_unread==True"
                      decoration-muted="state=='cancel'" decoration-info="state in ('wait','confirmed')" sample="1">
                    <field name="priority" optional="show" widget="priority" nolabel="1"/>
                    <field name="message_unread" invisible="1"/>
                    <field name="partner_ref" optional="hide"/>
                    <field name="up"/>
                    <field name="lote"/>
                    <field name="name" string="Reference" readonly="1"/>
                    <field name="date_order" invisible="not context.get('quotation_only', False)" optional="show"/>
                    <field name="date_approve" invisible="context.get('quotation_only', False)" optional="show"/>
                    <field name="partner_id" readonly="1"/>
                    <field name="company_id" readonly="1" options="{'no_create': True}"
                        groups="base.group_multi_company" optional="show"/>
                    <field name="date_planned" invisible="context.get('quotation_only', False)" optional="show"/>
                    <field name="user_id" optional="show"/>
                    <field name="origin" optional="show"/>
                    <field name="amount_untaxed" sum="Total Untaxed amount" string="Untaxed" widget="monetary" optional="hide"/>
                    <field name="qty_total" sum="Cant. Total" optional="show"/>
                    <field name="porc_impureza" widget="percentpie" optional="show"/>
                    <field name="amount_total" sum="Total amount" widget="monetary" optional="show"/>
                    <field name="currency_id" invisible="1"/>
                    <field name="state" optional="show"/>
                    <field name="invoice_status" attrs="{'column_invisible': [('parent.state', 'not in', ('sample', 'done'))]}"/>
                    <field name="activity_exception_decoration" widget="activity_exception"/>
                </tree>
            </field>
        </record>
        
        <!-- Unfortunately we want the sample kpis table to only show up in some list views,
             so we have to duplicate code to support both view versions.
             Desafortunadamente, queremos que la tabla kpis de muestra solo se muestre en algunas vistas de lista,
             por lo que tenemos que duplicar el código para admitir ambas versiones de vista
             -->
        <!-- SAMPLE,ORDER KPIS TREE -->
        <record id="sample_order_kpis_tree" model="ir.ui.view">
            <field name="name">sample.order.inherit.sample.order.tree</field>
            <field name="model">sample.order</field>
            <field name="priority" eval="10"/>
            <field name="arch" type="xml">
                <tree string="sample Order" multi_edit="1" decoration-bf="message_unread==True"
                      class="o_purchase_order" js_class="purchase_list_dashboard" sample="1">
                    <header>
                        <button name="action_create_invoice" type="object" string="Create Bills"/>
                    </header>
                    <field name="priority" optional="show" widget="priority" nolabel="1"/>
                    <field name="message_unread" invisible="1"/>
                    <field name="partner_ref" optional="hide"/>
                    <field name="name" string="Reference" readonly="1" decoration-bf="1"/>
                    <field name="date_approve" invisible="context.get('quotation_only', False)" optional="show"/>
                    <field name="partner_id" readonly="1"/>
                    <field name="up"/>
                    <field name="lote"/>
                    <field name="company_id" readonly="1" options="{'no_create': True}"
                        groups="base.group_multi_company" optional="show"/>
                    <field name="date_planned" invisible="context.get('quotation_only', False)" optional="show"/>
                    <field name="user_id" optional="show" widget="many2one_avatar_user"/>
                    <field name="date_order" attrs="{'invisible': ['|', '|', ('state', '=', 'sample'), ('state', '=', 'done'), ('state', '=', 'cancel')]}"
                        invisible="not context.get('quotation_only', False)" widget="remaining_days" optional="show"/>
                    <field name="activity_ids" widget="list_activity" optional="show"/>
                    <field name="origin" optional="show"/>
                    <field name="amount_untaxed" sum="Total Untaxed amount" string="Untaxed" widget="monetary" optional="hide"/>
                    <field name="qty_total" sum="Cantidad Total" optional="show" decoration-bf="1"/>
                    <field name="porc_impureza" widget="percentpie"/>
                    <field name="amount_total" sum="Total amount" widget="monetary" optional="show" decoration-bf="1"/>
                    <field name="currency_id" invisible="1"/>
                    <field name="state" optional="show" widget="badge" decoration-success="state == 'sample' or state == 'done'"
                        decoration-warning="state == 'to approve'" decoration-info="state == 'draft' or state == 'sent'"/>
                    <field name="invoice_status" optional="hide"/>
                </tree>
            </field>
        </record>
        
        <!-- SAMPLE ORDER VIEW TREE -->
        <record id="sample_order_view_tree" model="ir.ui.view">
            <field name="name">sample.order.view.tree</field>
            <field name="model">sample.order</field>
            <field name="arch" type="xml">
                <tree decoration-bf="message_unread==True"
                    decoration-muted="state=='cancel'"
                    decoration-info="state in ('wait','confirmed')"
                    string="Lista: Orden de Muestra"
                    class="o_purchase_order"
                    sample="1">
                    <header>
                        <button name="action_create_invoice" type="object" string="Create Bills"/>
                    </header>
                    <field name="priority" optional="show" widget="priority" nolabel="1"/>
                    <field name="message_unread" invisible="1"/>
                    <field name="partner_ref" optional="hide"/>
                    <field name="name" string="Reference" readonly="1" decoration-bf="1"/>
                    <field name="date_approve" widget="date" invisible="context.get('quotation_only', False)" optional="hide"/>
                    <field name="partner_id" optional="show"/>
                    <field name="up"/>
                    <field name="lote"/>
                    <field name="company_id" groups="base.group_multi_company" options="{'no_create': True}" optional="hide"/>
                    <field name="date_planned" invisible="context.get('quotation_only', False)" optional="hide"/>
                    <field name="user_id" widget="many2one_avatar_user" optional="show"/>
                    <field name="date_order" optional="show"/>
                    <field name="activity_ids" widget="list_activity" optional="hide"/>
                    <field name="origin" optional="show"/>
                    <field name="amount_untaxed" sum="Total Untaxed amount" string="Untaxed" widget="monetary" optional="hide"/>
                    <field name="qty_total" sum="Cantidad Total" optional="show" decoration-bf="1"/>
                    <field name="porc_impureza" avg="Promedio" widget="percentpie" optional="show" decoration-bf="1"/>
                    <field name="amount_total" sum="Total amount" widget="monetary" optional="hide" decoration-bf="1"/>
                    <field name="currency_id" invisible="1"/>
                    <field name="state" optional="show" invisible="0"/>
                    <field name="invoice_status" widget="badge" decoration-success="invoice_status == 'invoiced'" decoration-info="invoice_status == 'to invoice'" optional="show"/>
                </tree>
            </field>
        </record>
        
        <!-- SAMPLE ORDER VIEW ACTIVITY -->
        <record id="sample_order_view_activity" model="ir.ui.view">
            <field name="name">sample.order.activity</field>
            <field name="model">sample.order</field>
            <field name="arch" type="xml">
                <activity string="sample Order">
                    <templates>
                        <div t-name="activity-box">
                            <div>
                                <field name="name" display="full"/>
                                <field name="partner_id" muted="1" display="full"/>
                                <field name="up"/>
                                <field name="lote"/>
                            </div>
                        </div>
                    </templates>
                </activity>
            </field>
        </record>
        
        <!-- SAMPLE RFQ SOLICITUD DE COTIZACION "Q"uotation-->
        <record id="sample_rfq" model="ir.actions.act_window">
            <field name="name">-Requests for Quotation-</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">sample.order</field>
            <field name="view_mode">tree,kanban,form,pivot,graph,calendar,activity</field>
            <field name="view_id" ref="sample_order_kpis_tree"/>
            <field name="domain">[]</field>
            <field name="search_view_id" ref="view_sample_order_filter"/>
            <field name="context">{'quotation_only': True}</field>
            <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                No request for quotation found. Let's create one!
              </p><p>
                Requests for quotation are documents that will be sent to your suppliers to request prices for different products you consider buying.
                Once an agreement has been found with the supplier, they will be confirmed and turned into sample orders.
              </p>
            </field>
        </record>
        
        <!--* -->
        
        <!-- SAMPLE FORM ACTION -->
        <record id="sample_form_action" model="ir.actions.act_window">
            <field name="name">Sample Orders</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">sample.order</field>
            <field name="view_mode">tree,kanban,form,pivot,graph,calendar,activity</field>
            <field name="view_id" ref="sample_order_view_tree"/>
            <field name="domain">[('state','in',('draft', 'sample', 'done'))]</field>
            <field name="search_view_id" ref="sample_order_view_search"/>
            <field name="context">{}</field>
            <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                No sample order found. Let's create one!
              </p><p>
                Once you ordered your products to your supplier, confirm your request for quotation and it will turn into a sample order.
              </p>
            </field>
        </record>
        
        <!-- SAMPLE ORDER LINE TREE -->
        <record id="sample_order_line_tree" model="ir.ui.view">
            <field name="name">sample.order.line.tree</field>
            <field name="model">sample.order.line</field>
            <field name="arch" type="xml">
                <tree string="sample Order Lines" create="false">
                    <field name="order_id"/>
                    <field name="name"/>
                    <field name="partner_id" string="Vendor" />
                    <field name="product_id"/>
                    <field name="price_unit"/>
                    <field name="product_qty"/>
                    <field name="porc_item"/>
                    <field name="product_uom" groups="uom.group_uom"/>
                    <field name="longitud_avg"/>
                    <field name="price_subtotal" widget="monetary"/>
                    <field name="currency_id" invisible="1"/>
                    <field name="date_planned"  widget="date"/>
                </tree>
            </field>
        </record>
        
        <record id="sample_order_line_form2" model="ir.ui.view">
            <field name="name">sample.order.line.form2</field>
            <field name="model">sample.order.line</field>
            <field name="priority" eval="20"/>
            <field name="arch" type="xml">
                <form string="sample Order Line" create="false">
                    <sheet>
                        <label for="order_id" class="oe_edit_only"/>
                        <h1>
                            <field name="order_id" class="oe_inline"/>
                            <label string="," for="date_order" attrs="{'invisible':[('date_order','=',False)]}"/>
                            <field name="date_order" class="oe_inline"/>
                        </h1>
                        <label for="partner_id" class="oe_edit_only"/>
                        <h2><field name="partner_id"/></h2>
                        <group>
                            <group>
                                <field name="product_id" readonly="1"/>
                                <label for="product_qty"/>
                                <div class="o_row">
                                    <field name="product_qty" readonly="1"/>
                                    <field name="product_uom" readonly="1" groups="uom.group_uom"/>
                                    <field name="longitud_avg"/>
                                    <field name="porc_item" readonly="1"/>
                                </div>
                                <field name="price_unit"/>
                            </group>
                            <group>
                                <field name="taxes_id" widget="many2many_tags"
                                    domain="[('type_tax_use', '=', 'sample')]"/>
                                <field name="date_planned" widget="date" readonly="1"/>
                                <field name="company_id" groups="base.group_multi_company" options="{'no_create': True}"/>
                                <field name="account_analytic_id" colspan="4" groups="analytic.group_analytic_accounting"/>
                            </group>
                        </group>
                        <field name="name"/>
                        <separator string="Manual Invoices"/>
                        <field name="invoice_lines"/>
                    </sheet>
                </form>
            </field>
        </record>
          <record id="sample_order_line_search" model="ir.ui.view">
            <field name="name">sample.order.line.search</field>
            <field name="model">sample.order.line</field>
            <field name="arch" type="xml">
                <search string="Search sample Order">
                    <field name="order_id"/>
                    <field name="product_id"/>
                    <field name="partner_id" string="Vendor" filter_domain="[('partner_id', 'child_of', self)]"/>
                    <filter name="hide_cancelled" string="Hide cancelled lines" domain="[('state', '!=', 'cancel')]"/>
                    <group expand="0" string="Group By">
                        <filter name="groupby_supplier" string="Vendor" domain="[]" context="{'group_by' : 'partner_id'}" />
                        <filter name="groupby_product" string="Product" domain="[]" context="{'group_by' : 'product_id'}" />
                        <filter string="Order Reference" name="order_reference" domain="[]" context="{'group_by' :'order_id'}"/>
                        <filter string="Status" name="status" domain="[]" context="{'group_by' : 'state'}" />
                    </group>
                </search>
            </field>
        </record>
    <!--
    <record id="action_sample_batch_bills" model="ir.actions.server">
        <field name="name">Create Vendor Bills</field>
        <field name="model_id" ref="sample.model_sample_order"/>
        <field name="binding_model_id" ref="sample.model_sample_order"/>
        <field name='groups_id' eval="[(4, ref('account.group_account_invoice'))]"/>
        <field name="state">code</field>
        <field name="code">
            if records:
                action = records.action_create_invoice()
        </field>
    </record>
    -->
    
    <!-- ACTION SAMPLE SEND REMINDER -->
    <record id="action_sample_send_reminder" model="ir.actions.server">
        <field name="name">Send Reminder</field>
        <field name="model_id" ref="model_sample_order"/>
        <field name="binding_model_id" ref="model_sample_order"/>
        <!--
        <field name='groups_id' eval="[(4, ref('sample.group_send_reminder'))]"/>
        -->
        <field name="binding_view_types">form</field>
        <field name="state">code</field>
        <field name="code">
            if records:
                action = records._send_reminder_mail(send_single=True)
        </field>
    </record>
    
    <!-- Dashboard action buttons -->
    <!-- Dashboard action buttons: End in List view -->
    
    <record id="sample_action_dashboard_list" model="ir.actions.act_window">
        <field name="name">Requests for Quotation</field>
        <field name="res_model">sample.order</field>
        <field name="view_mode">form,tree,kanban,pivot,graph,calendar,activity</field>
        <field name="view_id" ref="sample.sample_order_kpis_tree"/>
        <field name="search_view_id" ref="view_sample_order_filter"/>
        <field name="target">main</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_empty_folder">
                No RFQs to display
            </p>
        </field>
    </record>
    <!---->
    <!-- Dashboard action buttons: End in Kanban view-->

    <record id="sample_action_dashboard_kanban" model="ir.actions.act_window">
        <field name="name">Requests for Quotation</field>
        <field name="res_model">sample.order</field>
        <field name="view_mode">form,tree,kanban,pivot,graph,calendar,activity</field>
        <field name="view_id" ref="sample.view_sample_order_kanban"/>
        <field name="search_view_id" ref="view_sample_order_filter"/>
        <field name="target">main</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_empty_folder">
                No RFQs to display
            </p>
        </field>
    </record>
    <!---->
    
    <record id="action_rfq_form" model="ir.actions.act_window">
        <field name="name">Requests for Quotation</field>
        <field name="res_model">sample.order</field>
        <field name="view_mode">form</field>
        <field name="view_id" ref="sample.sample_order_form"/>
        <field name="search_view_id" ref="view_sample_order_filter"/>
        <field name="target">main</field>
    </record>
    <!---->
            <!--Menú: Muestra de Caña-->
            <menuitem id="menu_procurement_management"
                name="Muestras de Caña"
                parent="menu_sample_root"
                sequence="1"/>

                    <!--Menú: Request for Quotation
                    <menuitem action="sample_rfq"
                        id="menu_sample_rfq"
                        parent="menu_procurement_management"
                        sequence="2"/>
                    -->
                    <!--Menú: Sample Order-->
                    <menuitem action="sample_form_action"
                        id="menu_sample_form_action"
                        parent="menu_procurement_management"
                        sequence="6"/>

                    <!--Menú: Proveedor -->
                    <menuitem id="menu_procurement_management_supplier_name"
                        name="Proveedores"
                        parent="menu_procurement_management"
                        action="account.res_partner_action_supplier"
                        sequence="15"/>

                        <!--Menú: Producto y Alarmas de Muestras de Caña-->
        <!--Alarmas de Productos de Muestras-->
        <record id="product_template_form_view_sample" model="ir.ui.view">
            <field name="name">product.template.sample</field>
            <field name="model">product.template</field>
            <field name="inherit_id" ref="product.product_template_only_form_view"/>
            <field name="arch" type="xml">
                <notebook position="inside">
                    <page string="ALERTAS-MUESTRAS">
                        <group col="4" colspan="2">
                                <group col="4" colspan="2">
                                    <separator string="Datos ALERTAS Caña Verde" colspan="2"/>
                                    <br/>
                                    <field name="alerta_ama_porc_verde" />
                                    <br/>
                                    <field name="alerta_roj_porc_verde" />
                                </group>
                                <group col="4" colspan="2">
                                    <separator string="Datos ALERTAS Caña Qmda." colspan="2"/>
                                    <br/>
                                    <field name="alerta_ama_porc_quema" />
                                    <br/>
                                    <field name="alerta_roj_porc_quema" />
                                </group>
                        </group>
                    </page>
                </notebook>
            </field>
        </record>

    <record model="ir.actions.act_window" id="sample.action_window_product_sample">
      <field name="name">sample window product sample</field>
      <field name="res_model">product.template</field>
      <field name="view_mode">tree,form</field>
    </record>


            <menuitem id="menu_product_management"
                name="Gestión de Productos en Mat. Ext."
                parent="menu_sample_root"
                sequence="11"/>

                    <!--Menú:  -->
                    <menuitem action="sample.action_window_product_sample"
                        id="menu_sample_product"
                        parent="menu_product_management"
                        sequence="12"/>
                    


</odoo>
